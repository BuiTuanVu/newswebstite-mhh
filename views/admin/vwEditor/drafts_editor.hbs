<div class="wrapper">
    <div class="loader-bg">
        <div class="loader-bar">
        </div>
    </div>
    <!-- Navbar-->
    {{> navbar}}

    <!-- Sidebar chat end-->
    <div class="content-wrapper">
        <!-- Container-fluid starts -->
        <div class="container-fluid">
            <form action="" method="POST">
                <!-- Header Starts -->
                <div class="row">
                    <div class="col-sm-12 p-0">
                        <div class="main-header">

                            <ol class="breadcrumb breadcrumb-title breadcrumb-arrow">
                                <li class="breadcrumb-item">
                                    <a href="/admin/index">
                                        <i class="icofont icofont-home"></i>
                                    </a>
                                </li>
                                <li class="breadcrumb-item"><a href="#">Drafts</a>
                                </li>
                                <li class="breadcrumb-item"><a href="basic-table.html">
                                    {{#switch this.stt}}
                                    {{#case 0}}
                                        Pending Drafts
                                    {{/case}}
                                    {{#case 1}}
                                        Published Posts
                                    {{/case}}
                                    {{#case -1}}
                                        Rejected Posts
                                    {{/case}}
                                    {{/switch}}
                                   </a>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                <!-- Header end -->

                <!-- Tables start -->
                <!-- Row start -->
                <div class="row">
                    <div class="col-sm-12">
                        <!-- Basic Table starts -->
                        <div class="card">
                            <div class="card-header">
                                
                                <div class="row f-right">
                                    {{#switch this.stt}}
                                    {{#case 0}}
                                    <div class="col-sm-2">
                                        <h5 class="card-header-text">Pending Drafts</h5>
                                    </div>
                                    {{/case}}
                                    {{#case 1}}
                                     <div class="col-sm-2">
                                        <h5 class="card-header-text">Published Posts</h5>
                                    </div>
                                    {{/case}}
                                     {{#case -1}}
                                     <div class="col-sm-2">
                                        <h5 class="card-header-text">Rejected Posts</h5>
                                    </div>
                                    {{/case}}
                                    {{/switch}}

                                    <div class="col-sm-2">
                                        <div class="input-group">
                                            <select name="Cates" id="Cates" class="form-control" style="height:35px">
                                                <option value="" disabled selected>Categories</option>
                                                {{#each this.cates}}
                                    
                                                <option value="{{cate_id}}">{{cate_name}}</option>
                                                {{/each}}

                                            </select>
                                            <span class="input-group-btn" id="btn-addon2">
                                                <a name="cateSrc" id="cateSrc"
                                                    class="btn btn-inverse-success shadow-none addon-btn waves-effect waves-light"
                                                    role="button">
                                                    <i class="icofont icofont-document-search"></i>
                                                </a>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-sm-2">
                                        <div class="input-group">
                                            <select name="" id="" class="form-control" style="height:35px">
                                                <option value="" selected>Today</option>
                                                <option value="1">Yesterday</option>
                                                <option value="2">Last 7 Days</option>
                                                <option value="3">This Month</option>
                                                <option value="4">Last Month</option>
                                            </select>
                                            <span class="input-group-btn" id="btn-addon2"><button type="button"
                                                    class="btn btn-inverse-default shadow-none addon-btn waves-effect waves-light"><i
                                                        class="icofont icofont-calendar"></i></button></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="input-group">
                                            <input id="btnaddon2" type="text" class="form-control"
                                                placeholder="Search posts" aria-describedby="btn-addon2">
                                            <span class="input-group-btn" id="btn-addon2"><button type="button"
                                                    class="btn btn-inverse-success shadow-none addon-btn waves-effect waves-light"><i
                                                        class="icofont icofont-document-search"></i></button></span>
                                        </div>
                                    </div>
                                    <div class="col-sm-1">
                                        <button id="btnSearch" name="btnSearch" type="button"
                                                            class="btn btn-primary waves-effect waves-light">
                                                            <i class="icofont icofont-search-alt-2"></i>
                                                        </button>
                                    </div>

                                </div>
                            </div>
                            <div class="card-block box-list ">
                                <div class="row">
                                    {{#each this.posts}}
                                    <div class="col-lg-3 col-sm-6">
                                        <div class="z-depth-top-0 waves-effect" style="height: 400px">
                                            <img class="card-img-top" src="{{post_image}}" alt="Card image cap"
                                                style="height: 160px; width: 100%; display: block;">
                                            <div class="p-5">
                                                <h5 class="card-title">{{post_title}}</h5>
                                                <p class="card-text">{{post_des}}</p>
                                              <p class="card-text" style="margin-top: 1em;"><span style="color: darksalmon; font-weight:bold ">{{cate_name}}</span> |
                                                    {{#formatDate post_date}}{{/formatDate}}</p>
                                            </div>
                                            <div style="position: absolute;bottom: -20px; align-content: center;">
                                                <div class="f-left">
                                                    {{#switch post_stt}}
                                                    {{#case '0'}}
                                                    <div class="label-main  m-l-1"><label
                                                            class="label bg-warning">Pending</label></div>
                                                    {{/case}}

                                                    {{#case '1'}}
                                                    <div class="label-main  m-l-1"><label
                                                            class="label bg-success">Published</label></div>
                                                    {{/case}}
                                                    {{#case '-1'}}
                                                    <div class="label-main m-l-1"><label
                                                            class="label bg-danger">Rejected</label></div>
                                                    {{/case}}
                                                    {{/switch}}
                                                </div>

                                                <div class="f-right" style="margin-left: 60px">
                                                    {{#if_eq post_stt 1}}
                                                    <div></div>

                                                    {{else}}
                                                    <div class="m-r-1">
                                                        <button id="btnView" type="button" onclick="location.href = '/admin/drafts/view-detail/{{post_id}}'"
                                                            class="btn btn-mini btn-primary waves-effect waves-light">
                                                            <i class="icofont icofont-search-alt-2"></i>
                                                        </button>
                                                        <button id="btnAccept" type="button" value="btnAccept"
                                                            onclick="location.href = '/admin/drafts/accept/{{post_id}}'"
                                                            class="btn btn-mini btn-success waves-effect waves-light">
                                                            <i class="icofont icofont-check"></i>
                                                        </button>
                                                        <button id="btnReject" type="button" value="btnReject"
                                                            onclick="location.href = '/admin/drafts/reject/{{post_id}}'"
                                                            class="btn btn-mini btn-danger waves-effect waves-light">
                                                            <i class="icofont icofont-close"></i>
                                                        </button>
                                                    </div>
                                                    {{/if_eq}}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    {{/each}}
                                </div>

                                <div class="row f-right">
                                    <div class="col-sm-12">
                                        <nav aria-label="...">
                                            <ul class="pagination">
                                                <li class="page-item disabled">
                                                    <a class="page-link" href="#" tabindex="-1"
                                                        aria-disabled="true">Previous</a>
                                                </li>
                                                {{#each this.pages}}
                                                {{#if active}}
                                                <li class="page-item active" aria-current="page">
                                                    <a class="page-link" href="javascript:;">{{value}} <span
                                                            class="sr-only">(current)</span></a>
                                                </li>
                                                {{else}}
                                                <li class="page-item">
                                                    <a class="page-link" href="?page={{value}}">{{value}}</a>
                                                </li>
                                                {{/if}}
                                                {{/each}}
                                                <li class="page-item">
                                                    <a class="page-link" href="#">Next</a>
                                                </li>

                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <!-- Basic Table ends -->


                    </div>
                </div>
                <!-- Row end -->
                <!-- Tables end -->
            </form>
        </div>

        <!-- Container-fluid ends -->
    </div>
</div>


<!-- Required Jqurey -->
<script src="/assets/plugins/jquery/dist/jquery.min.js"></script>
<script src="/assets/plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="/assets/plugins/tether/dist/js/tether.min.js"></script>

<!-- Required Fremwork -->
<script src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>

<!-- waves effects.js -->
<script src="/assets/plugins/Waves/waves.min.js"></script>

<!-- Scrollbar JS-->
<script src="/assets/plugins/jquery-slimscroll/jquery.slimscroll.js"></script>
<script src="/assets/plugins/jquery.nicescroll/jquery.nicescroll.min.js"></script>

<!--classic JS-->
<script src="/assets/plugins/classie/classie.js"></script>

<!-- notification -->
<script src="/assets/plugins/notification/js/bootstrap-growl.min.js"></script>

<!-- custom js -->
<script type="text/javascript" src="/assets/js/main.min.js"></script>
<script type="text/javascript" src="/assets/pages/elements.js"></script>
<script src="/assets/js/menu.min.js"></script>
<script src="/assets/js/dynamic-menu.js"></script>
<script>
    $(document).ready(function () {
        $('#main-navbar').dynamicMenu();

        $("#cateSrc").on("click", function (event) {
            var p = $('#Cates').val();
            window.location.href = '/admin/drafts/searchCate/' + p;
            event.preventDefault(); // This is for preventing the default behavior of links 
        });

        $("#sttSrc").on("click", function (event) {
            var p = $('#Status').val();
            window.location.href = '/admin/drafts/searchStatus/' + p;
            event.preventDefault();
        });

        $("#btnSearch").on("click", function (event) {
            var p = $('#Status').val();
            var q = $('#Cates').val();
            window.location.href = '/admin/drafts/searchAll/?' + p+'&'+q;
            event.preventDefault();
        });

          $("#Cates").val("{{this.cate}}").change();
          $("#Status").val("{{this.stt}}").change();
    });

</script>